#!/bin/bash
unameOut="$(uname -s)"
case "${unameOut}" in
    Linux*)     machine=Linux;;
    Darwin*)    machine=Mac;;
    CYGWIN*)    machine=Cygwin;;
    MINGW*)     machine=MinGw;;
    *)          machine="UNKNOWN:${unameOut}"
esac

getMacIP() {
  CMD="ipconfig getifaddr en0"
  OUTPUT=$(eval $CMD)
}


getLinuxIp() {
  CMD="ip addr show enp0s3 | grep "inet\b" | awk '{print $2}' | cut -d/ -f1"
  OUTPUT=$(eval $CMD)
  first=192.168.
  second=netmask
  strindex() {
    x="${1%%$2*}"
    [[ "$x" = "$1" ]] && echo -1 || echo "${#x}"
  }
  firstIndex=$(strindex "$OUTPUT" "$first")
  secondIndex=$(strindex "$OUTPUT" "$second")
  diff=$secondIndex-$firstIndex
}
if [ $machine = "Mac" ]; then
  getMacIP
  echo $OUTPUT
elif [ $machine = "Linux" ]; then
  getLinuxIp
  echo $OUTPUT
else
  echo "No Support for your device"
fi